{% extends 'page.html' %}

{% block canonical_link %}{{ url_for('.index') }}{% endblock %}

{% block content %}
<div class='container'>
  {% include "header.html" %}
  <div class='row' style='margin-top: 20px;'>
    <div class='col-md-6'>
        <div class='intro'>
        <p>See what the press has had to say about your constituency and election candidates with <em>Election Mentions</em>. Learn what they've said and done, make an informed vote.</p>
        <form class='form-inline' method='post' action='{{ url_for("postcode.postcode") }}'>
            <div class='form-group'>
                <input type='text' name='postcode' placeholder='Postcode, e.g. OX1 3DR' class='form-control'/> <input type='submit' value='find my constituency' class='btn btn-default'/>
            </div>
        </form>
        </div>
    </div>
    <div class='col-md-6'>
        {% include "article_add_form.html" %}
    </div>
  </div>
  <div class='row' style='margin-top: 20px;'>
    <div class='col-md-9'>
        <h2>Recently added</h2>
        {% set quotes_closed=True %}
        {% include "article_list.html" %}
    </div>
    <div class='col-md-3'>
        <h2>Candidates</h2>
        <input id="autocomplete-candidate" class='form-control' placeholder='Find candidate...'>
        <script>
        $(function() {
            $("#autocomplete-candidate").autocomplete({source: "{{ url_for('.autocomplete_person') }}",
                                                       select: function( event, ui ) {
                                                            $("#autocomplete-candidate").val(ui.item.label);
                                                            window.location.href = "/person/" + ui.item.value;
                                                        },
                                                       focus: function( event, ui ) {
                                                            $("#autocomplete-candidate").val(ui.item.label);
                                                        },
                                                       change: function( event, ui ) {
                                                            $("#autocomplete-candidate").val(ui.item.label);
                                                        }
                                                      });
        });
        </script>
        <h2>Constituencies</h2>
        <ul class='constituencies'>
        {% for constituency in constituencies %}
            <li><a href='{{ url_for('.constituency', constituency_id=constituency.id) }}'>{{ constituency.name }}</a></li>
        {% endfor %}
        </ul>
    </div>
  </div>
</div>
{% endblock content %}
